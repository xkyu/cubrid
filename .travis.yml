sudo: required

services:
  - docker

language: c

before_install:
  - gem install ghi

script:
  - env
  - docker run -v`pwd`/..:/home/cubrid -v`pwd`/../CUBRID:/home/CUBRID -e MAKEFLAGS='-j2' cubridci/build
  - docker run -v`pwd`/..:/home/cubrid -v`pwd`/../CUBRID:/home/CUBRID cubridci/test

after_failure:
  - FAILED="$?" && [ "$TRAVIS_FULL_REQUEST" != "false" ] && ghi comment -m "failed. [$FAILED]" $TRAVIS_FULL_REQUEST
